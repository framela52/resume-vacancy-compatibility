# ==============================================
# Backend Environment Variables Template
# ==============================================
# Copy this file to .env and update with your values

# ==============================================
# Database Configuration
# ==============================================
# PostgreSQL connection URL (format: postgresql://user:password@host:port/database)
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/resume_analysis

# Alternative: Separate database configuration (used by docker-compose)
# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres
# POSTGRES_DB=resume_analysis
# POSTGRES_HOST=localhost
# POSTGRES_PORT=5432

# ==============================================
# Redis Configuration (for Celery broker and result backend)
# ==============================================
# Redis connection URL (format: redis://host:port/database)
REDIS_URL=redis://localhost:6379/0

# Celery broker URL (typically same as Redis URL)
CELERY_BROKER_URL=redis://localhost:6379/0

# Celery result backend (where task results are stored)
CELERY_RESULT_BACKEND=redis://localhost:6379/0

# ==============================================
# Backend API Configuration
# ==============================================
# Host and port for the FastAPI server
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000

# API title and version (for OpenAPI documentation)
API_TITLE=Resume Analysis API
API_VERSION=1.0.0

# ==============================================
# CORS (Cross-Origin Resource Sharing) Settings
# ==============================================
# Frontend URL to allow CORS requests from (comma-separated for multiple)
FRONTEND_URL=http://localhost:5173

# CORS allowed origins (comma-separated, use * for all - not recommended for production)
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ==============================================
# File Upload Configuration
# ==============================================
# Maximum file upload size in megabytes
MAX_UPLOAD_SIZE_MB=10

# Allowed file extensions (comma-separated)
ALLOWED_FILE_TYPES=.pdf,.docx

# Upload directory for temporary file storage
UPLOAD_DIR=./uploads

# ==============================================
# ML Models Configuration
# ==============================================
# Path to cache ML models (downloaded models stored here)
MODELS_CACHE_PATH=./models_cache

# KeyBERT model name (default: distilbert-base-nli-mean-tokens)
# Alternative models: sentence-transformers/all-MiniLM-L6-v2
KEYBERT_MODEL=distilbert-base-nli-mean-tokens

# SpaCy language models (will be downloaded if not present)
SPACY_MODEL_EN=en_core_web_sm
SPACY_MODEL_RU=ru_core_web_sm

# Sentence Transformers model for resume-vacancy matching
SENTENCE_TRANSFORMER_MODEL=sentence-transformers/all-MiniLM-L6-v2

# ==============================================
# LanguageTool Configuration (Grammar/Spelling Checking)
# ==============================================
# LanguageTool server URL (local or public)
# Local server: http://localhost:8081/v2/check
# Public server: https://api.languagetool.org/v2/check
LANGUAGETOOL_SERVER=http://localhost:8081/v2/check

# Fallback to public API if local server fails
LANGUAGETOOL_USE_PUBLIC_AS_FALLBACK=true

# ==============================================
# Celery Worker Configuration
# ==============================================
# Celery worker concurrency (number of parallel tasks)
CELERY_WORKER_CONCURRENCY=2

# Celery worker log level
CELERY_LOG_LEVEL=info

# Task time limit in seconds (prevents hanging tasks)
CELERY_TASK_TIME_LIMIT=300

# Task soft time limit (allows graceful shutdown)
CELERY_TASK_SOFT_TIME_LIMIT=280

# Maximum number of task retries
CELERY_TASK_MAX_RETRIES=3

# Task result expiration time (seconds)
CELERY_RESULT_EXPIRES=86400

# ==============================================
# Analysis Configuration
# ==============================================
# Maximum analysis time in seconds (prevents long-running analyses)
ANALYSIS_TIMEOUT_SECONDS=300

# Enable/disable specific analysis components
ENABLE_KEYWORD_EXTRACTION=true
ENABLE_NER_EXTRACTION=true
ENABLE_GRAMMAR_CHECK=true
ENABLE_EXPERIENCE_CALCULATION=true
ENABLE_ERROR_DETECTION=true

# Keyword extraction parameters
KEYWORD_EXTRACTION_TOP_N=20
KEYWORD_NGRAM_RANGE_MIN=1
KEYWORD_NGRAM_RANGE_MAX=2

# Experience calculation parameters
EXPERIENCE_OVERLAP_DETECTION=true

# ==============================================
# Error Detection Configuration
# ==============================================
# Resume length limits (characters)
RESUME_MIN_LENGTH=500
RESUME_MAX_LENGTH=10000

# Portfolio requirement threshold (years of experience)
PORTFOTALIO_EXPERIENCE_THRESHOLD=1

# ==============================================
# Security Configuration
# ==============================================
# Secret key for JWT tokens (generate with: openssl rand -hex 32)
SECRET_KEY=your-secret-key-here-change-in-production

# JWT algorithm
JWT_ALGORITHM=HS256

# JWT token expiration time (minutes)
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30

# API rate limiting (requests per minute)
RATE_LIMIT_PER_MINUTE=60

# ==============================================
# Logging Configuration
# ==============================================
# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json, text
LOG_FORMAT=json

# Log file path (leave empty to log to stdout)
LOG_FILE=

# ==============================================
# Optional: LLM API Keys
# ==============================================
# OpenAI API Key (for optional LLM-based features)
# OPENAI_API_KEY=sk-your-openai-key-here

# Anthropic API Key (for Claude integration)
# ANTHROPIC_API_KEY=sk-ant-your-anthropic-key-here

# Cohere API Key (for alternative LLM features)
# COHERE_API_KEY=your-cohere-key-here

# ==============================================
# Optional: External Services
# ==============================================
# S3 bucket for file storage (AWS S3)
# AWS_ACCESS_KEY_ID=your-access-key
# AWS_SECRET_ACCESS_KEY=your-secret-key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=resume-analysis-files

# SendGrid API Key (for email notifications)
# SENDGRID_API_KEY=your-sendgrid-key

# Sentry DSN (for error tracking)
# SENTRY_DSN=https://your-sentry-dsn

# ==============================================
# Development/Testing Settings
# ==============================================
# Debug mode (enable only in development)
DEBUG=false

# Reload server on file changes (development only)
RELOAD=false

# Test mode (enables test-specific features)
TESTING=false

# ==============================================
# Monitoring & Analytics
# ==============================================
# Enable Prometheus metrics
ENABLE_PROMETHEUS_METRICS=false

# Prometheus metrics port
PROMETHEUS_PORT=9090

# Google Analytics tracking ID
# GA_TRACKING_ID=UA-XXXXXXXXX-X

# ==============================================
# Feature Flags
# ==============================================
# Enable experimental features
ENABLE_EXPERIMENTAL_FEATURES=false

# Enable beta features
ENABLE_BETA_FEATURES=false

# ==============================================
# Performance Tuning
# ==============================================
# Database pool size
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10

# Database pool recycle time (seconds)
DB_POOL_RECYCLE=3600

# Connection pool timeout (seconds)
DB_POOL_TIMEOUT=30

# ==============================================
# Localization
# ==============================================
# Default language: en, ru
DEFAULT_LANGUAGE=en

# Supported languages (comma-separated)
SUPPORTED_LANGUAGES=en,ru

# ==============================================
# File Cleanup Configuration
# ==============================================
# Enable automatic cleanup of uploaded files
ENABLE_FILE_CLEANUP=true

# File cleanup interval (hours)
FILE_CLEANUP_INTERVAL_HOURS=24

# File retention period (hours)
FILE_RETENTION_HOURS=48

# ==============================================
# Email Configuration (Optional)
# ==============================================
# SMTP server for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=noreply@resume-analysis.com
SMTP_TLS=true

# ==============================================
# Webhook Configuration (Optional)
# ==============================================
# Webhook URL for analysis completion notifications
WEBHOOK_URL=https://your-webhook-endpoint.com/notify
WEBHOOK_SECRET=your-webhook-secret

# ==============================================
# Backup Configuration
# ==============================================
# Enable automatic database backups
ENABLE_AUTO_BACKUP=false

# Backup interval (hours)
BACKUP_INTERVAL_HOURS=24

# Backup retention (days)
BACKUP_RETENTION_DAYS=30

# ==============================================
# Notes
# ==============================================
# 1. Never commit .env file to version control
# 2. Use strong, unique passwords in production
# 3. Rotate API keys and secrets regularly
# 4. Use different values for development, staging, and production
# 5. Test all configuration values before deploying to production
